{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/anantkumar/Desktop/Client/shiva-events-website-2/app/api/send-email/route.ts"],"sourcesContent":["import nodemailer from \"nodemailer\"\n\nexport async function POST(request: Request) {\n  try {\n    const { name, email, phone, message } = await request.json()\n\n    // Validate input\n    if (!name || !email || !message) {\n      return Response.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    console.log(\"[v0] Sending email with:\", { name, email, phone })\n\n    // Create transporter using Gmail SMTP\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASSWORD,\n      },\n    })\n\n    const submissionTime = new Date().toLocaleString(\"en-IN\", {\n      timeZone: \"Asia/Kolkata\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n    })\n\n    // Send confirmation email to user\n    await transporter.sendMail({\n      from: process.env.EMAIL_USER,\n      to: email,\n      subject: \"Thank you for contacting Shiva Events\",\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #1f2937;\">Thank you for reaching out!</h2>\n          <p>Hi ${name},</p>\n          <p>We've received your message and will get back to you as soon as possible.</p>\n          <p style=\"margin-top: 20px;\">Best regards,<br><strong>Shiva Events Team</strong></p>\n        </div>\n      `,\n    })\n\n    // Send admin notification email\n    await transporter.sendMail({\n      from: process.env.EMAIL_USER,\n      to: process.env.ADMIN_EMAIL,\n      subject: `New Inquiry from Shiva Events Website - ${name}`,\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #1f2937;\">New Contact Form Submission</h2>\n          <p><strong>Name:</strong> ${name}</p>\n          <p><strong>Email:</strong> ${email}</p>\n          <p><strong>Phone:</strong> ${phone || \"Not provided\"}</p>\n          <p><strong>Date & Time:</strong> ${submissionTime}</p>\n          <p><strong>Message:</strong></p>\n          <p style=\"background-color: #f3f4f6; padding: 15px; border-radius: 5px;\">\n            ${message.replace(/\\n/g, \"<br>\")}\n          </p>\n        </div>\n      `,\n    })\n\n    console.log(\"[v0] Email sent successfully to user and admin\")\n\n    return Response.json({ success: true, message: \"Email sent successfully\" }, { status: 200 })\n  } catch (error) {\n    console.error(\"[v0] Email send error:\", error)\n    return Response.json({ error: error instanceof Error ? error.message : \"Failed to send email\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE1D,iBAAiB;QACjB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YAC/B,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,QAAQ,GAAG,CAAC,4BAA4B;YAAE;YAAM;YAAO;QAAM;QAE7D,sCAAsC;QACtC,MAAM,cAAc,oNAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,cAAc;YAClC;QACF;QAEA,MAAM,iBAAiB,IAAI,OAAO,cAAc,CAAC,SAAS;YACxD,UAAU;YACV,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;YACR,QAAQ;QACV;QAEA,kCAAkC;QAClC,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;gBAGG,EAAE,KAAK;;;;MAIjB,CAAC;QACH;QAEA,gCAAgC;QAChC,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI,QAAQ,GAAG,CAAC,WAAW;YAC3B,SAAS,CAAC,wCAAwC,EAAE,MAAM;YAC1D,MAAM,CAAC;;;oCAGuB,EAAE,KAAK;qCACN,EAAE,MAAM;qCACR,EAAE,SAAS,eAAe;2CACpB,EAAE,eAAe;;;YAGhD,EAAE,QAAQ,OAAO,CAAC,OAAO,QAAQ;;;MAGvC,CAAC;QACH;QAEA,QAAQ,GAAG,CAAC;QAEZ,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC5F,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAuB,GAAG;YAAE,QAAQ;QAAI;IACjH;AACF"}}]
}